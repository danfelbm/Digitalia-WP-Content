(function(r,o){typeof exports=="object"&&typeof module<"u"?module.exports=o():typeof define=="function"&&define.amd?define(o):(r=typeof globalThis<"u"?globalThis:r||self,r.EhGooeyOverlay=o())})(this,function(){"use strict";const r={exponentialIn:t=>t==0?t:Math.pow(2,10*(t-1)),exponentialOut:t=>t==1?t:1-Math.pow(2,-10*t),exponentialInOut:t=>t==0||t==1?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,10-t*20)+1,sineOut:t=>Math.sin(t*1.5707963267948966),sineIn:t=>{const e=1.5707963267948966;return Math.sin((t-1)*e)+1},sineInOut:t=>-.5*(Math.cos(Math.PI*t)-1),backIn:t=>Math.pow(t,2)-t*Math.sin(t*Math.PI),backOut:t=>{let e=1-t;return 1-(Math.pow(e,2)-e*Math.sin(e*Math.PI))},backInOut:t=>{let e=t<.5?2*t:1-(2*t-1),s=Math.pow(e,3)-e*Math.sin(e*Math.PI);return t<.5?.5*s:.5*(1-s)+.5},test:t=>{let e=1-t;return 1-(Math.pow(e,2)-e*Math.cos(e*Math.PI))},quinticIn:t=>Math.pow(t,5),quinticOut:t=>1-Math.pow(t-1,5),quinticInOut:t=>t<.5?16*Math.pow(t,5):-.5*Math.pow(2*t-2,5)+1,elasticIn:t=>{const e=1.5707963267948966;return Math.sin(13*t*e)*Math.pow(2,10*(t-1))},elasticOut:t=>{const e=1.5707963267948966;return Math.sin(-13*(t+1)*e)*Math.pow(2,-10*t)+1},circularInOut:t=>t<.5?.5*(1-Math.sqrt(1-4*t*t)):.5*(Math.sqrt((3-2*t)*(2*t-1))+1),bounceOut:t=>{const e=.36363636363636365,s=8/11,i=9/10,n=4356/361,y=35442/1805,h=16061/1805;let a=t*t;return t<e?7.5625*a:t<s?9.075*a-9.9*t+3.4:t<i?n*a-y*t+h:10.8*t*t-20.52*t+10.72},cubicIn:t=>t*t*t,linear:t=>t,linear2:t=>t*3,circularIn:t=>1-Math.sqrt(1-t*t),circularOut:t=>Math.sqrt((2-t)*t),circularInOut:t=>t<.5?.5*(1-Math.sqrt(1-4*t*t)):.5*(Math.sqrt((3-2*t)*(2*t-1))+1),cubicOut:t=>{const e=t-1;return e*e*e+1},cubicInOut:t=>t<.5?4*t*t*t:.5*Math.pow(2*t-2,3)+1,quadraticOut:t=>-t*(t-2),quadraticIn:t=>t*t,quarticOut:t=>Math.pow(t-1,3)*(1-t)+1};class o{constructor(e){this.isOpened=!1,this.isAnimating=!1,this.hasPropsChanged=!1,this.initSettings(e)}initSettings(e){this.containerEl=e.containerEl,this.paths=e.paths,this.numPoints=e.numPoints,this.duration=e.duration,this.delayPointsMax=e.delayPointsMax,this.delayPerPath=e.delayPerPath,this.pointsDelayType=e.pointsDelayType,this.firstEase=r[e.firstEase],this.secondEase=r[e.secondEase],this.alternateEases=e.alternateEases,this.direction=e.direction,this.delayPointsArray=[],this.timeStart=Date.now(),this.keepOverlayOpen=e.keepOverlayOpen,this.isBuilder=e.isBuilder,this.hasPropsChanged=!0}toggle(){this.isAnimating=!0;const e=4*Math.random()+6;for(var s=0;s<this.numPoints;s++)switch(this.pointsDelayType){case"radian":const i=s/(this.numPoints-1)*Math.PI;this.delayPointsArray[s]=(Math.sin(-i)+Math.sin(-i*e)+2)/4*this.delayPointsMax;break;case"random":this.delayPointsArray[s]=Math.random()*this.delayPointsMax;break;case"none":this.delayPointsArray[s]=0;break}this.isOpened?this.close():(this.containerEl.style.zIndex="1000",this.open())}open(){this.isOpened=!0,this.containerEl.classList.add("eh-is-opened"),this.timeStart=Date.now(),this.renderLoop()}close(){this.isOpened=!1,this.containerEl.classList.remove("eh-show"),setTimeout(()=>{this.timeStart=Date.now(),this.renderLoop()},600)}updatePath(e){const s=[];for(var i=0;i<this.numPoints;i++)this.alternateEases?this.ease=i%2===1?this.firstEase:this.secondEase:this.ease=this.firstEase,this.direction=="up"||this.direction=="left"?s[i]=(1-this.ease(Math.min(Math.max(e-this.delayPointsArray[i],0)/this.duration,1)))*100:s[i]=this.ease(Math.min(Math.max(e-this.delayPointsArray[i],0)/this.duration,1))*100;let n="";this.direction=="left"||this.direction=="right"?n+=this.isOpened?`M 0 0 H ${s[0]} `:`M ${s[0]} 0`:n+=this.isOpened?`M 0 0 V ${s[0]} `:`M 0 ${s[0]} `;for(var i=0;i<this.numPoints-1;i++){const h=(i+1)/(this.numPoints-1)*100,a=h-1/(this.numPoints-1)*100/2;this.direction=="left"||this.direction=="right"?n+=`C ${s[i]} ${a} ${s[i+1]} ${a} ${s[i+1]} ${h} `:n+=`C ${a} ${s[i]} ${a} ${s[i+1]} ${h} ${s[i+1]} `}return this.direction=="left"||this.direction=="right"?this.isOpened?n+=this.direction=="left"?"H 100 V 0":"H 0 V 0":n+=this.direction=="left"?"H 0 V 0":"H 100 V 0":this.isOpened?n+=this.direction=="up"?"V 100 H 0":"V 0 H 0":n+=this.direction=="up"?"V 0 H 0":"V 100 H 0",n}render(){if(this.isOpened)for(var e=0;e<this.paths.length;e++)this.paths[e].setAttribute("d",this.updatePath(Date.now()-(this.timeStart+this.delayPerPath*e)));else for(var e=0;e<this.paths.length;e++)this.paths[e].setAttribute("d",this.updatePath(Date.now()-(this.timeStart+this.delayPerPath*(this.paths.length-e-1))))}renderLoop(){this.render(),Date.now()-this.timeStart<this.duration+this.delayPerPath*(this.paths.length-1)+this.delayPointsMax?requestAnimationFrame(()=>{this.renderLoop()}):(this.isAnimating=!1,this.isOpened&&this.containerEl.classList.add("eh-show"),this.isOpened||(this.containerEl.classList.remove("eh-is-opened"),this.containerEl.style.zIndex="-1"))}}class l{constructor(e){this.containerEl=e.containerEl,this.triggers=e.triggers,this.paths=e.paths,this.style=e.style,this.duration=e.duration,this.layersDistanceFactor=Math.max(1,e.layersDistanceFactor),this.direction=e.direction,this.keepOverlayOpen=e.keepOverlayOpen,this.isBuilder=e.isBuilder,this.hasPropsChanged=!1,this.init()}init(){this.setOverlayOptions(),this.initOverlay(),this.initEvents(),this.isBuilder&&this.initContainerObserver()}setOverlayOptions(){switch(this.overlayOptions={containerEl:this.containerEl,paths:this.paths,duration:this.duration,direction:this.direction,delayPerPath:50*this.layersDistanceFactor,keepOverlayOpen:this.keepOverlayOpen,isBuilder:this.isBuilder},this.style){case"style_1":this.overlayOptions.numPoints=2,this.overlayOptions.delayPointsMax=333,this.overlayOptions.pointsDelayType="none",this.overlayOptions.alternateEases=!1,this.overlayOptions.firstEase="sineOut",this.overlayOptions.secondEase="exponentialInOut";break;case"style_2":this.overlayOptions.numPoints=3,this.overlayOptions.delayPointsMax=333,this.overlayOptions.pointsDelayType="none",this.overlayOptions.alternateEases=!0,this.overlayOptions.firstEase="sineOut",this.overlayOptions.secondEase="sineIn";break;case"style_3":this.overlayOptions.numPoints=3,this.overlayOptions.delayPointsMax=333,this.overlayOptions.pointsDelayType="none",this.overlayOptions.alternateEases=!0,this.overlayOptions.firstEase="sineIn",this.overlayOptions.secondEase="sineOut";break;case"style_4":this.overlayOptions.numPoints=2,this.overlayOptions.delayPointsMax=0,this.overlayOptions.pointsDelayType="none",this.overlayOptions.alternateEases=!0,this.overlayOptions.firstEase="linear",this.overlayOptions.secondEase="cubicIn";break;case"style_5":this.overlayOptions.numPoints=4,this.overlayOptions.delayPointsMax=0,this.overlayOptions.pointsDelayType="none",this.overlayOptions.alternateEases=!0,this.overlayOptions.firstEase="sineOut",this.overlayOptions.secondEase="exponentialInOut";break;case"style_6":this.overlayOptions.numPoints=2,this.overlayOptions.delayPointsMax=0,this.overlayOptions.pointsDelayType="none",this.overlayOptions.alternateEases=!0,this.overlayOptions.firstEase="cubicIn",this.overlayOptions.secondEase="linear";break;case"style_7":this.overlayOptions.numPoints=10,this.overlayOptions.delayPointsMax=100,this.overlayOptions.pointsDelayType="radian",this.overlayOptions.alternateEases="none",this.overlayOptions.firstEase="cubicInOut",this.overlayOptions.secondEase="exponentialInOut";break;case"style_8":this.overlayOptions.numPoints=10,this.overlayOptions.delayPointsMax=100,this.overlayOptions.pointsDelayType="radian",this.overlayOptions.alternateEases=!0,this.overlayOptions.firstEase="sineIn",this.overlayOptions.secondEase="exponentialInOut";break;case"style_9":this.overlayOptions.numPoints=85,this.overlayOptions.delayPointsMax=300,this.overlayOptions.pointsDelayType="random",this.overlayOptions.alternateEases=!1,this.overlayOptions.firstEase="cubicInOut",this.overlayOptions.secondEase="exponentialInOut";break}}initOverlay(){this.overlay=new o(this.overlayOptions)}onTrigger(){this.overlay.isAnimating||this.overlay.toggle()}initEvents(){this.onTriggerHandler=this.onTrigger.bind(this),this.triggers&&this.triggers.forEach(e=>{e.addEventListener("click",this.onTriggerHandler)})}destroy(){this.triggers&&this.triggers.forEach(e=>{e.removeEventListener("click",this.onTriggerHandler)})}update(){this.destroy(),this.setOverlayOptions(),this.overlay.initSettings(this.overlayOptions),this.initEvents()}onObserve(e,s){e.forEach(i=>{i.type==="attributes"&&i.attributeName==="class"&&this.overlay.isOpened&&!this.containerEl.classList.contains("eh-show")&&this.containerEl.classList.add("eh-show")})}initContainerObserver(){this.onObserveHandler=this.onObserve.bind(this);const e={attributes:!0};new MutationObserver(this.onObserveHandler).observe(this.containerEl,e)}}return l});

(function(e,i){typeof exports=="object"&&typeof module<"u"?module.exports=i():typeof define=="function"&&define.amd?define(i):(e=typeof globalThis<"u"?globalThis:e||self,e.EhImageComparison=i())})(this,function(){"use strict";class e{constructor(t){this.container=t.container,this.path=t.path,this.mode=t.mode,this.isTouchDevice="ontouchstart"in window,this.refreshBounds=!0,this.bounds=null,this.pathState={qx:-.2,my:t.startingPosition},this.mode==="horizontal"?(this.toPath=`m 0 0 h ${this.pathState.my} q ${this.pathState.qx} .5 0 1 h -1 z`,this.fromPath=`m 0 0 h ${this.pathState.my} q ${this.pathState.qx} .5 0 1 h -1 z`):(this.toPath=`m 0 0 v ${this.pathState.my} q .5 ${this.pathState.qx} 1 0 v -1 z`,this.fromPath=`m 0 0 v ${this.pathState.my} q .5 ${this.pathState.qx} 1 0 v -1 z`),this.init()}init(){gsap.ticker.add(this.render.bind(this)),this.createWaveTimeline(),this.initEvents()}createWaveTimeline(){this.waveTimeline=gsap.timeline().to(this.pathState,{qx:.2,duration:1,ease:"sine.inOut",repeat:-1,yoyo:!0})}onMouseLeave(){this.waveTimeline.restart(),this.container.style.cursor="auto",this.refreshBounds=!0}onMouseMove(t){this.refreshBounds&&(this.bounds=this.container.getBoundingClientRect(),this.refreshBounds=!1);const s=this.isTouchDevice?t.changedTouches[0].clientX:t.clientX,h=this.isTouchDevice?t.changedTouches[0].clientY:t.clientY;if(this.isTouchDevice&&(s<this.bounds.left||s>this.bounds.right||h<this.bounds.top||h>this.bounds.bottom)){this.onMouseLeave();return}if(this.relativePosition={x:(s-this.bounds.left)/(this.bounds.right-this.bounds.left),y:(h-this.bounds.top)/(this.bounds.bottom-this.bounds.top)},this.mode==="horizontal"){if(this.relativePosition.x-this.pathState.my>=.2||this.pathState.my-this.relativePosition.x>=.2)return;this.container.style.cursor="ew-resize",this.waveTimeline.pause(),this.pathState.qx=this.relativePosition.x>this.pathState.my?gsap.utils.interpolate(this.pathState.qx,.2,.1):gsap.utils.interpolate(this.pathState.qx,-.2,.1),this.pathState.my=this.relativePosition.x}else{if(this.relativePosition.y-this.pathState.my>=.2||this.pathState.my-this.relativePosition.y>=.2)return;this.container.style.cursor="ns-resize",this.waveTimeline.pause(),this.pathState.qx=this.relativePosition.y>this.pathState.my?gsap.utils.interpolate(this.pathState.qx,.2,.1):gsap.utils.interpolate(this.pathState.qx,-.2,.1),this.pathState.my=this.relativePosition.y}}initEvents(){this.mouseLeaveHandler=this.onMouseLeave.bind(this),this.mouseMoveHandler=this.onMouseMove.bind(this),this.container.addEventListener("mouseleave",this.mouseLeaveHandler),this.container.addEventListener("mousemove",this.mouseMoveHandler),this.isTouchDevice&&(this.container.addEventListener("touchmove",this.mouseMoveHandler),this.container.addEventListener("touchend",this.mouseLeaveHandler))}render(){this.mode==="horizontal"?this.toPath=`m 0 0 h ${this.pathState.my} q ${this.pathState.qx} .5 0 1 h -1 z`:this.toPath=`m 0 0 v ${this.pathState.my} q .5 ${this.pathState.qx} 1 0 v -1 z`,gsap.set(this.path,{attr:{d:this.toPath}})}destroy(){this.container.removeEventListener("mouseleave",this.mouseLeaveHandler),this.container.removeEventListener("mousemove",this.mouseMoveHandler),this.waveTimeline.kill(),gsap.set(this.path,{clearProps:"all"})}}return e});

(function(n,e){typeof exports=="object"&&typeof module<"u"?module.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.EhEntranceAnimationMask=e())})(this,function(){"use strict";var _=Object.defineProperty;var y=(n,e,o)=>e in n?_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o;var m=(n,e,o)=>(y(n,typeof e!="symbol"?e+"":e,o),o);gsap.registerPlugin(ScrollTrigger);const{getMediaQueryString:n,mergeObjects:e}=window.BreakdanceFrontend.utils;class o{constructor(i){m(this,"defaultOptions",{style:"wipe",direction:"right",direction_alternative:"center",duration:{number:1,unit:"s",style:"1s"},delay:{number:0,unit:"s",style:"0s"},ease:"power1.out",trigger_location:0,play_once:!1,disable_at:null,enable_markers:!1});var t,s,a;this.options=e(this.defaultOptions,i),this.containerEl=i.containerEl,this.matchMedia=gsap.matchMedia(),this.breakpoints=window.BreakdanceFrontend.data.breakpoints,this.fadeInDuration=.4,this.fadeInEase="power2.out",this.fadeOutDuration=.4,this.fadeOutEase="power2.in",this.isInsideTabs=!!((t=this.containerEl)!=null&&t.closest(".bde-advanced-tabs")),this.isInsideAccordion=!!((s=this.containerEl)!=null&&s.closest(".bde-accordion")),this.isAccordionWrapper=!!((a=this.containerEl)!=null&&a.classList.contains("bde-accordion__content-wrapper")),this.init()}init(){this.checkIfInAccordion(),this.createClipPathConfig(),this.createTimeline(),this.assignAnimationToElement(),this.initEvents()}checkIfInAccordion(){this.isInsideAccordion&&this.isAccordionWrapper&&(this.containerEl.style.opacity=1,this.containerEl.style.filter="none",this.containerEl=this.containerEl.querySelector(".bde-accordion__panel"),this.containerEl.style.opacity=0,this.containerEl.style.filter=`url(#eh-entrance-animation-displacement-${this.options.id})`,this.isInsideAccordion=!0)}createClipPathConfig(){this.clipPathsConfig={wipe:{left:{from:"inset(0% 0% 0% 100%)",to:"inset(0% 0% 0% 0%)"},right:{from:"inset(0% 100% 0% 0%)",to:"inset(0% 0% 0% 0%)"},up:{from:"inset(100% 0% 0% 0%)",to:"inset(0% 0% 0% 0%)"},down:{from:"inset(0% 0% 100% 0%)",to:"inset(0% 0% 0% 0%)"},top_left:{from:"polygon(150% 50%, 150% 50%, 50% 150%, 50% 150%)",to:"polygon(50% -50%, 150% 50%, 50% 150%, -50% 50%)"},top_right:{from:"polygon(-50% 50%, 50% 150%, 50% 150%, -50% 50%)",to:"polygon(50% -50%, 150% 50%, 50% 150%, -50% 50%)"},bottom_left:{from:"polygon(50% -50%, 150% 50%, 150% 50%, 50% -50%)",to:"polygon(50% -50%, 150% 50%, 50% 150%, -50% 50%)"},bottom_right:{from:"polygon(0 0, 0 0, 0 0, 0 50%)",to:"polygon(-50% 0%, 200% 0, 0 200%, 0 -50%)"}},circle:{center:{from:"circle(0%)",to:"circle(100%)"},left:{from:"circle(0% at 100% 50%)",to:"circle(100% at 50% 50%)"},right:{from:"circle(0% at 0% 50%)",to:"circle(100% at 50% 50%)"},up:{from:"circle(0% at 50% 100%)",to:"circle(100% at 50% 50%)"},down:{from:"circle(0% at 50% 0%)",to:"circle(100% at 50% 50%)"},top_left:{from:"circle(0% at 100% 100%)",to:"circle(100% at 50% 50%)"},top_right:{from:"circle(0% at 0% 100%)",to:"circle(100% at 50% 50%)"},bottom_left:{from:"circle(0% at 100% 0%)",to:"circle(100% at 50% 50%)"},bottom_right:{from:"circle(0% at 0% 0%)",to:"circle(100% at 50% 50%)"}},square:{center:{from:"inset(100% 100% 100% 100%)",to:"inset(0% 0% 0% 0%)"},left:{from:"inset(25% 0% 25% 100%)",to:"inset(0% 0% 0% 0%)"},right:{from:"inset(25% 100% 25% 0%)",to:"inset(0% 0% 0% 0%)"},up:{from:"inset(100% 25% 0% 25%)",to:"inset(0% 0% 0% 0%)"},down:{from:"inset(0% 25% 100% 25%)",to:"inset(0% 0% 0% 0%)"},top_left:{from:"inset(100% 0 0 100%)",to:"inset(0% 0% 0% 0%)"},top_right:{from:"inset(100% 100% 0 0)",to:"inset(0% 0% 0% 0%)"},bottom_left:{from:"inset(0 0 100% 100%)",to:"inset(0% 0% 0% 0%)"},bottom_right:{from:"inset(25% 100% 25% 0%)",to:"inset(0% 0% 0% 0%)"}}}}createCustomEvents(){this.animationStartedEvent=new CustomEvent("ehEntranceAnimationStarted",{detail:this.timeline,bubbles:!0,cancelable:!0,composed:!1}),this.animationCompletedEvent=new CustomEvent("ehEntranceAnimationCompleted",{detail:this.timeline,bubbles:!0,cancelable:!0,composed:!1})}assignAnimationToElement(){this.containerEl._elementsHive||(this.containerEl._elementsHive={}),this.containerEl._elementsHive.entranceAnimation||(this.containerEl._elementsHive.entranceAnimation={}),this.containerEl._elementsHive.entranceAnimation.timeline=this.timeline,this.containerEl._elementsHive.entranceAnimation.reset=()=>this.resetTimelineProps(),this.containerEl._elementsHive.entranceAnimation.play=()=>this.timeline.restart(),this.containerEl._elementsHive.entranceAnimation.fadeIn=()=>this.fadeIn(),this.containerEl._elementsHive.entranceAnimation.fadeOut=()=>this.fadeOut()}fadeIn(){gsap.fromTo(this.containerEl,{opacity:0},{opacity:1,duration:this.fadeInDuration,ease:this.fadeInEase})}fadeOut(){gsap.fromTo(this.containerEl,{opacity:1},{opacity:0,duration:this.fadeOutDuration,ease:this.fadeOutEase})}resetTimelineProps(){gsap.set(this.containerEl,{clearProps:"all"})}createTimeline(){var d;let{style:i,direction:t,direction_alternative:s,duration:a,delay:r,ease:f,trigger_location:p,play_once:u,disable_at:l,id:E,enable_markers:g}=this.options;if((i==="circle"||i==="square")&&(t=s),this.matchMedia.add({allMediaQueries:"all",isReduceMotion:"(prefers-reduced-motion: reduce)"},h=>{let{isReduceMotion:b}=h.conditions;this.timeline=gsap.timeline({delay:r.number,paused:!0,scrollTrigger:{trigger:this.containerEl,start:`top ${100-p}%`,toggleActions:"play none none none",id:E,markers:g,onEnter:()=>{this.containerEl.dataset.ehIsAnimated==="false"&&this.timeline.restart(!0)},onLeave:()=>{this.containerEl.dataset.ehIsAnimated||this.timeline.progress(1)}},onStart:()=>{this.containerEl.dispatchEvent(this.animationStartedEvent)},onComplete:()=>{this.containerEl.dataset.ehIsAnimated=!0,this.containerEl.dispatchEvent(this.animationCompletedEvent)}}).fromTo(this.containerEl,{clipPath:this.clipPathsConfig[i][t].from},{clipPath:this.clipPathsConfig[i][t].to,duration:b?0:a.number,ease:f},0),this.createCustomEvents(),u||ScrollTrigger.create({trigger:this.containerEl,start:"top bottom",onLeaveBack:()=>{this.resetTimelineProps(),this.containerEl.dataset.ehIsAnimated=!1}})}),!l)return;let c=n("",(d=this.breakpoints.filter(h=>h.id===l)[0])==null?void 0:d.maxWidth);!c&&l==="breakpoint_base"&&(c="all"),this.matchMedia.add(c,()=>{gsap.set(this.containerEl,{opacity:1})})}initEvents(){this.isInsideTabs&&window.addEventListener("breakdance_refresh_animations",()=>{this.containerEl.dataset.ehIsAnimated=!1,this.timeline.restart()}),this.isInsideAccordion&&this.containerEl.closest(".bde-accordion__content-wrapper").querySelector(".bde-accordion__button").addEventListener("click",()=>{this.containerEl.dataset.ehIsAnimated=!1,this.timeline.restart()})}deleteMarkers(){["start","end","scroller-start","scroller-end"].forEach(t=>{const s=`.gsap-marker-${t}.marker-${this.options.id}`;document.querySelectorAll(s).forEach(r=>r.remove())})}destroy(){this.deleteMarkers(),this.matchMedia.contexts.forEach(i=>{i.data.forEach(t=>{t==null||t.kill(),t=null}),i=null}),this.matchMedia.revert(),this.matchMedia=null,this.resetTimelineProps()}}return o});

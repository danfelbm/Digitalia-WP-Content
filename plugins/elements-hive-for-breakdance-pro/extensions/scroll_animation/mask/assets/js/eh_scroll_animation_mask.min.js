(function(s,r){typeof exports=="object"&&typeof module<"u"?module.exports=r():typeof define=="function"&&define.amd?define(r):(s=typeof globalThis<"u"?globalThis:s||self,s.EhScrollAnimationMask=r())})(this,function(){"use strict";var A=Object.defineProperty;var U=(s,r,a)=>r in s?A(s,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[r]=a;var b=(s,r,a)=>(U(s,typeof r!="symbol"?r+"":r,a),a);gsap.registerPlugin(ScrollTrigger);const{getMediaQueryString:s,mergeObjects:r}=window.BreakdanceFrontend.utils,{isSelectorExists:a}=window.ElementsHiveUtils.dom;class _{constructor(e){b(this,"defaultOptions",{style:"wipe",direction:"up",direction_alternative:"center",scroll_direction:"downUp",scrub:0,is_pinned:!1,element_to_pin:"self",pin_selector:null,trigger_element:"self",trigger_selector:null,trigger_location:[0,100],play_once:!1,disable_pin_spacing:!1,ease:"power1.out",disable_at:null,enable_markers:!1});this.options=r(this.defaultOptions,e),this.containerEl=e.containerEl,this.matchMedia=gsap.matchMedia(),this.breakpoints=window.BreakdanceFrontend.data.breakpoints,this.init()}init(){this.createClipPathConfig(),this.createTimeline()}createClipPathConfig(){this.clipPathsConfig={wipe:{left:{from:"inset(0% 0% 0% 100%)",to:"inset(0% 0% 0% 0%)"},right:{from:"inset(0% 100% 0% 0%)",to:"inset(0% 0% 0% 0%)"},up:{from:"inset(100% 0% 0% 0%)",to:"inset(0% 0% 0% 0%)"},down:{from:"inset(0% 0% 100% 0%)",to:"inset(0% 0% 0% 0%)"},top_left:{from:"polygon(150% 50%, 150% 50%, 50% 150%, 50% 150%)",to:"polygon(50% -50%, 150% 50%, 50% 150%, -50% 50%)"},top_right:{from:"polygon(-50% 50%, 50% 150%, 50% 150%, -50% 50%)",to:"polygon(50% -50%, 150% 50%, 50% 150%, -50% 50%)"},bottom_left:{from:"polygon(50% -50%, 150% 50%, 150% 50%, 50% -50%)",to:"polygon(50% -50%, 150% 50%, 50% 150%, -50% 50%)"},bottom_right:{from:"polygon(0 0, 0 0, 0 0, 0 50%)",to:"polygon(-50% 0%, 200% 0, 0 200%, 0 -50%)"}},circle:{center:{from:"circle(0%)",to:"circle(100%)"},left:{from:"circle(0% at 100% 50%)",to:"circle(100% at 50% 50%)"},right:{from:"circle(0% at 0% 50%)",to:"circle(100% at 50% 50%)"},up:{from:"circle(0% at 50% 100%)",to:"circle(100% at 50% 50%)"},down:{from:"circle(0% at 50% 0%)",to:"circle(100% at 50% 50%)"},top_left:{from:"circle(0% at 100% 100%)",to:"circle(100% at 50% 50%)"},top_right:{from:"circle(0% at 0% 100%)",to:"circle(100% at 50% 50%)"},bottom_left:{from:"circle(0% at 100% 0%)",to:"circle(100% at 50% 50%)"},bottom_right:{from:"circle(0% at 0% 0%)",to:"circle(100% at 50% 50%)"}},square:{center:{from:"inset(100% 100% 100% 100%)",to:"inset(0% 0% 0% 0%)"},left:{from:"inset(25% 0% 25% 100%)",to:"inset(0% 0% 0% 0%)"},right:{from:"inset(25% 100% 25% 0%)",to:"inset(0% 0% 0% 0%)"},up:{from:"inset(100% 25% 0% 25%)",to:"inset(0% 0% 0% 0%)"},down:{from:"inset(0% 25% 100% 25%)",to:"inset(0% 0% 0% 0%)"},top_left:{from:"inset(100% 0 0 100%)",to:"inset(0% 0% 0% 0%)"},top_right:{from:"inset(100% 100% 0 0)",to:"inset(0% 0% 0% 0%)"},bottom_left:{from:"inset(0 0 100% 100%)",to:"inset(0% 0% 0% 0%)"},bottom_right:{from:"inset(25% 100% 25% 0%)",to:"inset(0% 0% 0% 0%)"}}}}getTrigger(e,t){return!e||e=="self"||e==""?this.containerEl:e=="parent"?this.containerEl.parentElement:!t||!a(t)?this.containerEl:document.querySelector(t)}getPinElement(e,t,o,i){return!t||e!="downUp"?!1:o=="self"||o==""?this.containerEl:o=="parent"?this.containerEl.parentElement:!i||!a(i)?!1:document.querySelector(i)}resetTimelineProps(){gsap.set([this.containerEl,this.triggerEl,this.pinnedEl],{clearProps:"all"})}createTimeline(){var E;let{style:e,direction:t,direction_alternative:o,scroll_direction:i,trigger_element:p,trigger_selector:w,trigger_location:d,is_pinned:k,element_to_pin:y,pin_selector:P,scrub:u,ease:S,play_once:m,disable_pin_spacing:T,disable_at:g,id:v,enable_markers:M}=this.options;(e==="circle"||e==="square")&&(t=o),this.containerEl.dataset.ehScrollAnimationIsAnimated=!1,this.triggerEl=this.getTrigger(p,w),this.pinnedEl=this.getPinElement(i,k,y,P);const C="eh-scroll-animation-active";let l=i=="down";const c=u==0?0:u/1e3;if(this.matchMedia.add({allMediaQueries:"all",isReduceMotion:"(prefers-reduced-motion: reduce)"},f=>{f.conditions,this.timeline=gsap.timeline({paused:!0,onStart:()=>{i=="up"&&this.isTimelineProgressed},onComplete:()=>{i=="up"&&!this.isTimelineProgressed||(this.containerEl.dataset.ehScrollAnimationIsAnimated=!0)}}).fromTo(this.containerEl,{clipPath:i=="up"?this.clipPathsConfig[e][t].to:this.clipPathsConfig[e][t].from},{clipPath:i=="up"?this.clipPathsConfig[e][t].from:this.clipPathsConfig[e][t].to,ease:S}),this.elementScrollTrigger=ScrollTrigger.create({trigger:this.triggerEl,start:`top ${100-d[0]}%`,end:`bottom ${100-d[1]}%`,pin:this.pinnedEl,pinSpacing:!T,scrub:!0,toggleClass:C,id:v,markers:M,onUpdate:n=>{switch(i){case"downUp":default:gsap.to(this.timeline,{progress:n.progress,duration:c,overwrite:!0});break;case"down":if(n.direction==1){if(this.timeline.progress()>n.progress||!l)return;gsap.to(this.timeline,{progress:n.progress,duration:c,overwrite:!0})}else{if(!l)return;l&&this.timeline.progress()>n.progress&&gsap.to(this.timeline,{progress:n.progress,duration:c,overwrite:!0})}break;case"up":if(n.direction==-1){if(this.timeline.progress()<n.progress||!l)return;gsap.to(this.timeline,{progress:n.progress,duration:c,overwrite:!0})}else{if(!l)return;l&&this.timeline.progress()<n.progress&&gsap.to(this.timeline,{progress:n.progress,duration:c,overwrite:!0})}break}return null}}),i!="downUp"&&ScrollTrigger.create({trigger:this.containerEl,start:"top bottom",end:"bottom top",onLeave:()=>{i==="down"&&(l=!1),i=="up"&&(!m||m&&this.timeline.progress()>.99)&&(this.timeline.progress(1),l=!0)},onLeaveBack:()=>{i=="down"&&!m&&(this.timeline.progress(0),l=!0),i=="up"&&(l=!1)}}),i=="up"&&this.timeline.progress(1),this.isTimelineProgressed=!0}),!g)return;let h=s("",(E=this.breakpoints.filter(f=>f.id===g)[0])==null?void 0:E.maxWidth);!h&&g==="breakpoint_base"&&(h="all"),this.matchMedia.add(h,()=>{gsap.set(this.containerEl,{opacity:1})})}deleteMarkers(){["start","end","scroller-start","scroller-end"].forEach(t=>{const o=`.gsap-marker-${t}.marker-${this.options.id}`;document.querySelectorAll(o).forEach(p=>p.remove())})}cleanupPinSpacer(){var e,t;(e=this.elementScrollTrigger)!=null&&e.spacer&&((t=this.elementScrollTrigger)==null||t.spacer.remove())}destroy(){var e;this.deleteMarkers(),(e=this.elementScrollTrigger)==null||e.kill(!0),this.matchMedia.contexts.forEach(t=>{t.data.forEach(o=>{o==null||o.kill(!0),o=null}),t.revert(),t=null}),this.matchMedia=null,this.resetTimelineProps()}}return _});
